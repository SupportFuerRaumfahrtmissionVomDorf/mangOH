//--------------------------------------------------------------------------------------------------
/**
 * Implementation of the main menu screen.
 *
 * Copyright (C) Sierra Wireless Inc.
 */
//--------------------------------------------------------------------------------------------------

#include "cmdLine.h"
#include "mainMenu.h"
#include "ledScreen.h"
#include "buzzerScreen.h"
#include "octaveScreen.h"

//--------------------------------------------------------------------------------------------------
/**
 * Draw the main menu.
 */
//--------------------------------------------------------------------------------------------------
static void DrawMainMenu
(
    void
)
//--------------------------------------------------------------------------------------------------
{
    printf("\n= MAIN MENU =\n");
}


//--------------------------------------------------------------------------------------------------
/**
 * Handle the "LEDs" menu option selection.
 */
//--------------------------------------------------------------------------------------------------
static void HandleLedsSelection
(
    void* contextPtr
)
//--------------------------------------------------------------------------------------------------
{
    ledScreen_Enter();
}


//--------------------------------------------------------------------------------------------------
/**
 * Handle the "Buzzer" menu option selection.
 */
//--------------------------------------------------------------------------------------------------
static void HandleBuzzerSelection
(
    void* contextPtr
)
//--------------------------------------------------------------------------------------------------
{
    buzzerScreen_Enter();
}

//--------------------------------------------------------------------------------------------------
/**
 * Handle the "Octave" menu option selection.
 */
//--------------------------------------------------------------------------------------------------
static void HandleOctaveSelection
(
    void* contextPtr
)
//--------------------------------------------------------------------------------------------------
{
    octaveScreen_Enter();
}


//--------------------------------------------------------------------------------------------------
/**
 * Leave the main menu.
 */
//--------------------------------------------------------------------------------------------------
static void Leave
(
    void
)
//--------------------------------------------------------------------------------------------------
{
    // No place to go but back to the shell.
    cmdLine_Exit();
}


//--------------------------------------------------------------------------------------------------
/**
 * The Screen object for the main menu.
 */
//--------------------------------------------------------------------------------------------------
static Screen_t MainMenu =
{
    .drawFunc = DrawMainMenu,
    .leaveFunc = Leave
};


//--------------------------------------------------------------------------------------------------
/**
 * Initialize the main menu screen.
 */
//--------------------------------------------------------------------------------------------------
void mainMenu_Init
(
    void
)
//--------------------------------------------------------------------------------------------------
{
    // No initialization necessary.
}


//--------------------------------------------------------------------------------------------------
/**
 * Enter the main menu screen.
 */
//--------------------------------------------------------------------------------------------------
void mainMenu_Enter
(
    void
)
//--------------------------------------------------------------------------------------------------
{
    cmdLine_MenuMode();
    cmdLine_AddMenuEntry("LEDs", HandleLedsSelection, NULL);
    cmdLine_AddMenuEntry("Buzzer", HandleBuzzerSelection, NULL);
    cmdLine_AddMenuEntry("Octave", HandleOctaveSelection, NULL);
    cmdLine_SetCurrentScreen(&MainMenu);
}
